/* ================================================================
   Kastorice's Blog - Post Page Template Style (FULL & FINAL)
   ================================================================ */

/* 1. 字体与基础重置 */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@400;700&display=swap');

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

:root {
    --article-width: 720px; 
    --mobile-padding: 20px; 
    --font-mono: 'Noto Sans Mono', monospace;
    
    /* 浅色模式 */
    --code-bg: #F1F4F8;
    --post-header-bg: #ECF0FB;
    --inline-code-bg: #EAEEF5;
    --inline-code-text: #626A78;
    --card-border: #e0e0e0;
    --link-color: #305CB9;
    --scrollbar-thumb: rgba(100, 100, 100, 0.2);
}

/* 深色模式 */
[data-theme="dark"] {
    --code-bg: #1E1F20;
    --post-header-bg: #1A1D24;
    --inline-code-bg: #2D3139;
    --inline-code-text: #A2ACBB;
    --card-border: #333;
    --link-color: #5C8CFF;
    --scrollbar-thumb: rgba(255, 255, 255, 0.15); /* 解决滑动条白色问题 */
}

/* ================= 2. 核心代码字体覆盖 ================= */
pre[class*="language-"], 
code[class*="language-"], 
pre[class*="language-"] *, 
code[class*="language-"] *,
.post-content pre, 
.post-content code, 
.post-content pre *, 
.post-content code * {
    font-family: var(--font-mono) !important;
    font-variant-ligatures: none;
    text-shadow: none !important;
}

/* ================= 3. 布局与垂直对齐线 ================= */
.post-main { width: 100%; margin-top: 70px; }

.post-header-banner {
    background-color: var(--post-header-bg);
    width: 100%;
    padding: 40px 0;
    display: flex;
    justify-content: center;
}

.post-body {
    width: 100%;
    display: flex;
    justify-content: center;
    margin: 30px 0;
}

/* 核心锁定：页眉与正文在移动端绝对对齐 */
.post-header-content,
.post-content {
    width: 100%;
    max-width: var(--article-width);
    padding: 0 var(--mobile-padding) !important;
}

.post-header-title {
    font-size: 2.2rem;
    font-weight: 800;
    line-height: 1.3;
    margin-bottom: 25px;
    color: var(--text-color);
}
[data-theme="light"] .post-header-title { color: #000; }

/* ================= 4. 正文样式补全 (图片、链接、标题) ================= */
.post-content { 
    font-size: 1.1rem; 
    line-height: 1.8; 
    color: var(--text-color); 
}

/* 链接样式 - 恢复为您要求的样式 */
.post-content a {
    text-decoration: none !important;
    color: var(--link-color) !important;
    font-weight: 500;
    border-bottom: 1px solid transparent;
    transition: all 0.2s ease;
}
.post-content a:hover {
    border-bottom-color: var(--link-color);
    opacity: 0.8;
}

/* 图片样式 - 恢复圆角、阴影、高度限制 */
.post-content img {
    max-width: 100% !important;
    max-height: 500px !important; 
    border-radius: 12px !important;
    margin: 2em auto !important;
    display: block !important;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15) !important;
}

/* 标题间距统一 */
.post-content h2, .post-content h3 { 
    margin: 1.2em 0 !important; 
    font-weight: 700; 
}

/* 行内代码 (#EAEEF5) */
.post-content :not(pre) > code {
    background-color: var(--inline-code-bg) !important;
    color: var(--inline-code-text) !important;
    font-family: var(--font-mono) !important;
    padding: 0.2em 0.4em !important;
    border-radius: 4px !important;
    font-size: 0.92em !important;
}

/* 分割线 */
.post-content hr {
    border: none; height: 1px; background-color: var(--card-border);
    margin: 1.5em 0 !important; opacity: 0.6;
}

/* ================= 5. 代码块 Copy 按钮绝对静止 ================= */
.code-wrapper {
    position: relative !important;
    margin: 1.5em 0 !important;
    width: 100%;
    border-radius: 12px;
    overflow: hidden; 
}

.copy-button {
    position: absolute;
    top: 10px; right: 10px;
    z-index: 50;
    padding: 5px 12px;
    font-size: 11px;
    font-family: var(--font-mono);
    color: #888;
    background-color: var(--code-bg);
    border: 1px solid rgba(150,150,150,0.3);
    border-radius: 6px;
    cursor: pointer;
    transition: 0.2s;
}

.post-content pre[class*="language-"] {
    margin: 0 !important;
    padding: 1.5em !important;
    overflow-x: auto !important;
    background-color: var(--code-bg) !important;
    position: static !important;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) transparent;
}

/* ================= 6. 滚动条修复 (暗黑模式防白) ================= */
pre[class*="language-"]::-webkit-scrollbar { height: 8px !important; }
pre[class*="language-"]::-webkit-scrollbar-track { background: transparent !important; }
pre[class*="language-"]::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb) !important;
    border-radius: 10px !important;
    border: 2px solid transparent !important;
    background-clip: content-box !important;
}
pre[class*="language-"]::-webkit-scrollbar-thumb:hover { background: rgba(150, 150, 150, 0.4) !important; }

/* ================= 7. 返回顶部按钮 ================= */
#back-to-top {
    position: fixed; right: 20px; bottom: 20px;
    width: 50px; height: 50px;
    background-color: #305CB9; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    opacity: 0; visibility: hidden; transition: 0.4s; z-index: 2000;
}
#back-to-top.show { opacity: 1; visibility: visible; }
#back-to-top svg { width: 28px; height: 28px; fill: #fff; transform: translateY(1px); }